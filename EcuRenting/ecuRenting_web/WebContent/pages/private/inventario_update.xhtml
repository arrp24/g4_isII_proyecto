<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:body>
	<ui:composition template="../../template/common/layout.xhtml">
		<ui:define name="title">LOG :: Update Inventario</ui:define>
		<ui:define name="content">
			<h1 class="ui-state-default">Actualización de Inventario</h1>
			<br />
			<h2 class="ui-state-default">Inventario en Transito</h2>
			<h:form id="formEdit1">
				<p:scrollPanel style="width:980px;height:450px">
					<p:dataTable id="dataTable" var="inventarioTransito"
						value="#{inventarioTransitoBacking.inventariosTransito}"
						paginator="true" rows="5"
						paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">

						<p:column sortBy="#{inventarioTransito.id_cliente}"
							headerText="Cliente" filterBy="#{inventarioTransito.id_cliente}"
							filterMatchMode="contains">
							<h:outputText value="#{inventarioTransito.id_cliente}" />
						</p:column>
						<p:column sortBy="#{inventarioTransito.descripcion}"
							headerText="Descripción"
							filterBy="#{inventarioTransito.descripcion}"
							filterMatchMode="contains">
							<h:outputText value="#{inventarioTransito.descripcion}" />
						</p:column>
						<p:column sortBy="#{inventarioTransito.tipo}" headerText="Tipo"
							filterBy="#{inventarioTransito.tipo}" filterMatchMode="contains">
							<h:outputText value="#{inventarioTransito.tipo}" />
						</p:column>
						<p:column headerText="Existencia">
							<h:outputText value="#{inventarioTransito.medida}" />
						</p:column>
						<p:column sortBy="#{inventarioTransito.uniMedia}"
							headerText="U. de Medida"
							filterBy="#{inventarioTransito.uniMedia}"
							filterMatchMode="contains">
							<h:outputText value="#{inventarioTransito.uniMedia}" />
						</p:column>
						<p:column headerText="Estado ">
							<h:outputText value="#{inventarioTransito.estado}" />
						</p:column>
						<p:column>
							<p:commandButton id="btnCargar"
								update=":formEdit1 :formEdit2 :frmUbicacionItem " value="SAVE"
								oncomplete="dlgUbicacionItem.show()"
								title="Haz clic para agregar la ubicación"
								icon="ui-icon-circle-plus">
								<f:setPropertyActionListener value="#{inventarioTransito}"
									target="#{inventarioUpdateBacking.selectedInventarioTransito}" />
							</p:commandButton>
						</p:column>
					</p:dataTable>
				</p:scrollPanel>
			</h:form>
			<hr />
			<hr size="10" style="color: #0056b2;" />
			<hr />
			<h2 class="ui-state-default">Inventario Actual</h2>
			<h:form id="formEdit2">
				<p:scrollPanel style="width:980px;height:350px">
					<p:dataTable id="dataTable" var="inventario"
						value="#{inventarioUpdateBacking.inventarios}" paginator="true"
						rows="5"
						paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">

						<p:column sortBy="#{inventario.descripcion}"
							headerText="Descripción" filterBy="#{inventario.descripcion}"
							filterMatchMode="contains">
							<h:outputText value="#{inventario.descripcion}" />
						</p:column>
						<p:column headerText="Existencia">
							<h:outputText value="#{inventario.existencia}" />
						</p:column>
						<p:column headerText="Caducidad"
							filterBy="#{inventario.fecha_caducidad}"
							filterMatchMode="contains">
							<h:outputText value="#{inventario.fecha_caducidad}" />
						</p:column>
						<p:column headerText="Volumen">
							<h:outputText value="#{inventario.volumen}" />
						</p:column>
						<p:column headerText="Peso">
							<h:outputText value="#{inventario.peso}" />
						</p:column>
						<p:column sortBy="#{inventario.ubicacion}" headerText="Ubicación"
							filterBy="#{inventario.ubicacion}" filterMatchMode="contains">
							<h:outputText value="#{inventario.ubicacion}" />
						</p:column>
					</p:dataTable>
				</p:scrollPanel>
			</h:form>

			<h:form id="frmUbicacionItem">
				<p:dialog id="dialogoUbicacionItem" widgetVar="dlgUbicacionItem"
					modal="true" resizable="true" header="Ingresar Ubicación"
					closable="false">
					<h:panelGrid columns="2">
						<h:outputText value="Ingrese la ubicación del Item" />
						<h:inputText id="out" value="#{inventarioUpdateBacking.ubicacion}">
							<p:ajax event="keyup" update="out"
								oncomplete="dlgUbicacion.show()" />
						</h:inputText>

						<h:outputText value="Ingrese la Fecha de Caducidad del Item" />
						<p:calendar id="fechaSiguienteME"
							value="#{inventarioUpdateBacking.inventario.fecha_caducidad}"
							pattern="dd-MM-yyyy" />
					</h:panelGrid>
					<f:facet name="footer">
						<p:commandButton id="btnGuardarNuevo" value="Guardar"
							actionListener="#{inventarioUpdateBacking.crearInventario()}"
							update=":formEdit1 :formEdit2 :frmUbicacionItem" />
						<p:commandButton id="btnCancelarNuevo" value="Cancelar"
							onclick="dlgUbicacionItem.hide()" update="@all" />
					</f:facet>
				</p:dialog>
			</h:form>

			<h:form id="frmUbicacion">
				<p:dialog id="dialogoUbicacion" widgetVar="dlgUbicacion"
					modal="true" resizable="true" header="Ingresar Ubicación"
					closable="false">

					<h2 class="ui-state-default">Ubicaciones en el Inventario</h2>
							

					<hr />
					<p:commandButton id="btnAceptarUbicacion" value="Aceptar"
						actionListener="#{inventarioUpdateBacking.fijarUbicacion()}"
						update=":frmUbicacionItem"
						onclick="dlgUbicacion.hide() dlgUbicacionItem.show()" />
				</p:dialog>
			</h:form>
		</ui:define>
	</ui:composition>
</h:body>
</html>